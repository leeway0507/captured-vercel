### 자체 이미지 최적화 파이프라인 구축

#### 문제

* EC2(T2 micro)로 서비스 배포 시 LCP 평균 14초에 달하는 페이지 로딩 지연 발생

* 이미지 최적화(Sharp.js)에 상당한 서버 리소스가 할당되는 것이 원인

#### 1차 시도 : LCP 5.2초로 개선

* 원본 이미지를 1차 가공하여 서버의 이미지 최적화에 드는 리소스 절감 시도

* 제품 등록 시 자동으로 원본 이미지를 리사이징하고 WEBP로 이미지 압축하는 프로세스를 구축하여 LCP 5.2초로 개선

#### 2차 시도 : LCP 0.9초로 개선

* 이미지 최적화로 인한 체감 로딩 속도는 향상됐으나 LCP 향상 필요

* 서버 부담을 줄이기 위해 이미지 최적화 옵션을 비활성화하고 외부에서 이미지를 제공 받는 구조로 서비스 개선

* 기존 이미지 처리 프로세스에 S3 업로드 기능을 추가하고 cloudfront를 활용해 이미지 캐싱 및 관련 비용 절감

* 서버 리소스 절감으로 인한 FCP 일부 개선 및 LCP 0.9초 달성



#### 스택

* Python, Pillow, Numpy, Boto3, Bria 1.4(배경제거 모델)

```md
image-resize
├── components
│ ├── bg_remover: CV 모델 활용 이미지 배경 제거
│ ├── image_resizer: 이미지 리사이징 및 webp 확장자 변경
│ ├── s3_uploader: s3에 이미지 업로드 및 업데이트
│  
├── test
│ ├── test_bg_remover
│ ├── test_image_resizer
│ └── test_s3_uploader
```
